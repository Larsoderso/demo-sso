const http = require("http")

/*
  Valid credential response encoded as JWT. Contains 2 verifiable credentials,
  One for email, one for name. You can decode it here: https://jwt.io/
*/

const token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.\
eyJjcmVkZW50aWFsUmVzcG9uc2UiOnsic3VwcGxpZWRDcmVkZW50aWFscyI6W3siQGNvbnRleHQiOlsia\
hR0cHM6Ly93M2lkLm9yZy9pZGVudGl0eS92MSIseyJwcm9vZiI6Imh0dHBzOi8vdzNpZC5vcmcvc2VjdXJ\
pdHkjcHJvb2YifSx7IlByb29mT2ZFbWFpbENyZWRlbnRpYWwiOiJodHRwczovL2lkZW50aXR5LmpvbG9j\
b20uY29tL3Rlcm1zL1Byb29mT2ZFbWFpbENyZWRlbnRpYWwiLCJzY2hlbWEiOiJodHRwOi8vc2NoZW1hL\
m9yZy8iLCJlbWFpbCI6InNjaGVtYTplbWFpbCJ9XSwiaWQiOiJjbGFpbUlkOmIwNzYwMDdhMGIxYWMiLC\
JuYW1lIjoiRW1haWwgYWRkcmVzcyIsImlzc3VlciI6ImRpZDpqb2xvOmIzMTBkMjkzYWVhYzhhNWNhNjg\
wMjMyYjk2OTAxZmU4NTk4OGZkZTI4NjBhMWE1ZGI2OWI0OTc2MjkyM2NjODgiLCJ0eXBlIjpbIkNyZWRl\
bnRpYWwiLCJQcm9vZk9mRW1haWxDcmVkZW50aWFsIl0sImNsYWltIjp7ImVtYWlsIjoiZXVnZW5pdUBqb\
2xvY29tLmNvbSIsImlkIjoiZGlkOmpvbG86YjMxMGQyOTNhZWFjOGE1Y2E2ODAyMzJiOTY5MDFmZTg1OT\
g4ZmRlMjg2MGExYTVkYjY5YjQ5NzYyOTIzY2M4OCJ9LCJpc3N1ZWQiOiIyMDE4LTA5LTMwVDExOjUxOjA\
xLjI2M1oiLCJwcm9vZiI6eyJ0eXBlIjoiRWNkc2FLb2JsaXR6U2lnbmF0dXJlMjAxNiIsImNyZWF0ZWQi\
OiIyMDE4LTA5LTMwVDExOjUxOjAxLjI2M1oiLCJjcmVhdG9yIjoiZGlkOmpvbG86YjMxMGQyOTNhZWFjO\
GE1Y2E2ODAyMzJiOTY5MDFmZTg1OTg4ZmRlMjg2MGExYTVkYjY5YjQ5NzYyOTIzY2M4OCNrZXlzLTEiLC\
Jub25jZSI6IjlhMWE1MDgyYzE1OTUiLCJzaWduYXR1cmVWYWx1ZSI6IklvMytwdUhDdjMxWlJmdm4yYnl\
lbTR3ZWt6U2U0U0RYa25SL2VTaXMxQ3BXeC9KaUZndGV0eGNIRDZDK2JOSWdGQjB2Yi9vTi9RWjZIZFZY\
Tjl5VGdnPT0ifX0seyJAY29udGV4dCI6WyJodHRwczovL3czaWQub3JnL2lkZW50aXR5L3YxIix7InByb\
29mIjoiaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eSNwcm9vZiJ9LHsiUHJvb2ZPZk5hbWVDcmVkZW50aW\
FsIjoiaHR0cHM6Ly9pZGVudGl0eS5qb2xvY29tLmNvbS90ZXJtcy9Qcm9vZk9mTmFtZUNyZWRlbnRpYWw\
iLCJzY2hlbWEiOiJodHRwOi8vc2NoZW1hLm9yZy8iLCJmYW1pbHlOYW1lIjoic2NoZW1hOmZhbWlseU5h\
bWUiLCJnaXZlbk5hbWUiOiJzY2hlbWE6Z2l2ZW5OYW1lIn1dLCJpZCI6ImNsYWltSWQ6NzBhYWMxMTk2O\
DlhIiwibmFtZSI6Ik5hbWUiLCJpc3N1ZXIiOiJkaWQ6am9sbzpiMzEwZDI5M2FlYWM4YTVjYTY4MDIzMm\
I5NjkwMWZlODU5ODhmZGUyODYwYTFhNWRiNjliNDk3NjI5MjNjYzg4IiwidHlwZSI6WyJDcmVkZW50aWF\
sIiwiUHJvb2ZPZk5hbWVDcmVkZW50aWFsIl0sImNsYWltIjp7ImZhbWlseU5hbWUiOiJSdXN1IiwiZ2l2\
ZW5OYW1lIjoiRXVnZW5pdSIsImlkIjoiZGlkOmpvbG86YjMxMGQyOTNhZWFjOGE1Y2E2ODAyMzJiOTY5M\
DFmZTg1OTg4ZmRlMjg2MGExYTVkYjY5YjQ5NzYyOTIzY2M4OCJ9LCJpc3N1ZWQiOiIyMDE4LTA5LTMwVD\
ExOjUxOjAzLjI1MloiLCJwcm9vZiI6eyJ0eXBlIjoiRWNkc2FLb2JsaXR6U2lnbmF0dXJlMjAxNiIsImN\
yZWF0ZWQiOiIyMDE4LTA5LTMwVDExOjUxOjAzLjI1MloiLCJjcmVhdG9yIjoiZGlkOmpvbG86YjMxMGQy\
OTNhZWFjOGE1Y2E2ODAyMzJiOTY5MDFmZTg1OTg4ZmRlMjg2MGExYTVkYjY5YjQ5NzYyOTIzY2M4OCNrZ\
XlzLTEiLCJub25jZSI6ImIxZjhkODU4MDY5MWYiLCJzaWduYXR1cmVWYWx1ZSI6Im9JU0ZWblAvTGhtaz\
ZrdHkwQ01QNTIxMmJMREY4czlOUTg2aHE2RzFiNlVMZ2NIeElPQmV6OFFpczVXVStQSzFHdzVaYjQzY3J\
6aUVjSFV5c0s4UFNBPT0ifX1dfSwidHlwIjoiY3JlZGVudGlhbFJlc3BvbnNlIiwiaWF0IjoxNTM4MzA4\
MjY0Nzg3LCJpc3MiOiJkaWQ6am9sbzpiMzEwZDI5M2FlYWM4YTVjYTY4MDIzMmI5NjkwMWZlODU5ODhmZ\
GUyODYwYTFhNWRiNjliNDk3NjI5MjNjYzg4I2tleXMtMSJ9.Rpp_Lcd0C3Ol0zysmJtFGON3Mtjn2SESh\
_h9mMYGiuxi3_cXleKxgbK-Eq8W0Uv5QdbEbJnVOfZwUR_Iq2CQFw'

/*
  Replace the user id with the one randomly generated by the demo application.
  You should be able to find it in the logs after starting the service, denoted as:
  '[DEBUG] : WATCHING FOR KEY p98s3'
*/

const randomUserId = 'p98se'

const options = {
  hostname: 'localhost',
  port: 9000,
  path: `/authentication/${randomUserId}`,
  method: 'POST',
  headers: { 'Content-Type': 'application/json' }
}

const req = http.request(options, res => {
  res.setEncoding('utf8')
  res.on('data', body => {
    console.log('Body: ' + body)
  })
}).write(JSON.stringify({token}))

req.end()